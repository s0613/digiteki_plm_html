<!-- 검색 분할형: 상세 패널 컴포넌트 (독립 사용 가능) -->
<div class="searchsplit-digitek-detail" style="height: 100vh; background: #fff; border-left: 1px solid #e5e5ec;">
  <div class="searchsplit-digitek-detail">
        <!-- 상세 헤더 -->
        <div class="searchsplit-digitek-detail-header">
          <div class="searchsplit-digitek-detail-title-row">
            <div class="searchsplit-digitek-detail-title-group">
              <!-- [커스텀] 우측 상세 패널: th:text="${selectedItem.title}" 으로 선택된 항목 제목 동적 바인딩 -->
              <h3 class="searchsplit-digitek-detail-title">시제품 제작 6</h3>
              <!-- [커스텀] th:text="${selectedItem.statusLabel}" 으로 상태 배지 동적 바인딩 -->
              <span class="searchsplit-digitek-detail-badge">시험 의뢰 승인</span>
            </div>
            <div class="searchsplit-digitek-detail-actions">
              <!-- 확대 버튼: 기본 표시 / 전체 보기 시 숨김 -->
              <button type="button" class="searchsplit-digitek-detail-btn" aria-label="확대 보기" data-action="expand">
                <i class="dicon dicon-expand-lg" style="color: #555;" aria-hidden="true"></i>
              </button>
              <!-- 축소 버튼: 전체 보기 시 표시 / 기본 숨김 -->
              <button type="button" class="searchsplit-digitek-detail-btn" aria-label="축소" aria-haspopup="dialog" data-action="shrink" hidden>
                <i class="dicon dicon-shrink" style="color: #555;" aria-hidden="true"></i>
              </button>
              <button type="button" class="searchsplit-digitek-detail-btn" aria-label="닫기" data-action="close">
                <i class="dicon dicon-close icon-digitek-16" style="color: #555;" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- 상세 본문 (스크롤) -->
        <div class="searchsplit-digitek-detail-body">
          <!-- 일정 섹션 -->
          <div class="searchsplit-digitek-detail-section">
            <div class="searchsplit-digitek-schedule-header">
              <span class="searchsplit-digitek-schedule-label">SCHEDULE</span>
              <span class="searchsplit-digitek-schedule-label searchsplit-digitek-schedule-label-date">DATE</span>
            </div>
            <hr class="searchsplit-digitek-section-divider" />
            <div class="searchsplit-digitek-schedule-rows">
              <div class="searchsplit-digitek-schedule-row">
                <span class="searchsplit-digitek-info-label">완료 요구일</span>
                <!-- [커스텀] th:text="${#temporals.format(selectedItem.dueDate, 'yyyy.MM.dd')}" 으로 동적 바인딩 -->
                <span class="searchsplit-digitek-info-value">2026.01.16</span>
              </div>
              <div class="searchsplit-digitek-schedule-row">
                <span class="searchsplit-digitek-info-label">의뢰 완료일</span>
                <!-- [커스텀] th:text="${#temporals.format(selectedItem.completedDate, 'yyyy.MM.dd')}" 으로 동적 바인딩 -->
                <span class="searchsplit-digitek-info-value">2025.11.22</span>
              </div>
              <div class="searchsplit-digitek-schedule-row">
                <span class="searchsplit-digitek-info-label">의뢰 완료일</span>
                <span class="searchsplit-digitek-info-value">2025.12.05</span>
              </div>
            </div>
          </div>

          <!-- 세부사항 아코디언 (열림) -->
          <div class="accordion-digitek-inner">
            <div class="accordion-digitek-inner-header accordion-digitek-inner-header-open" role="button" tabindex="0"
                 aria-expanded="true" aria-controls="searchsplit-detail-info">
              <span class="accordion-digitek-inner-title">세부사항</span>
              <i class="dicon dicon-chevron-up-sm accordion-digitek-chevron" aria-hidden="true"></i>
            </div>
            <!-- [커스텀] 세부사항 패널: 선택된 항목 기준으로 th:text="${selectedItem.XXX}" 으로 각 필드 바인딩 -->
            <div id="searchsplit-detail-info" class="accordion-digitek-inner-content">
              <div class="searchsplit-digitek-info-grid">
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">의뢰 제목</span>
                  <!-- [커스텀] th:text="${selectedItem.title}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">시제품 제작 의뢰 6</span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">의뢰 번호</span>
                  <!-- [커스텀] th:text="${selectedItem.requestNo}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">SMPL-2511010006</span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">진행도</span>
                  <!-- [커스텀] th:text="${selectedItem.progressPercent + '%'}" 으로 진행률 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value d-flex align-items-center gap-digitek-8">
                    <span class="progress-digitek-circular" role="progressbar" aria-valuenow="80" style="--percent: 80; --progress-size: 22px; --progress-width: 3px;"></span>
                    80%
                  </span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">Test Spec</span>
                  <!-- [커스텀] th:text="${selectedItem.testSpec}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">PB.free test(ES90000-04 rev.5)</span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">프로젝트</span>
                  <!-- [커스텀] th:text="${selectedItem.projectCode}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">TL</span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">개발 단계</span>
                  <!-- [커스텀] th:text="${selectedItem.devStage}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">CV</span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">샘플 수</span>
                  <!-- [커스텀] th:text="${selectedItem.sampleCount}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">10</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 세부사항 (담당자 정보) 아코디언 (열림) -->
          <div class="accordion-digitek-inner searchsplit-digitek-detail-section-contact">
            <div class="accordion-digitek-inner-header accordion-digitek-inner-header-open" role="button" tabindex="0"
                 aria-expanded="true" aria-controls="searchsplit-detail-contact">
              <span class="accordion-digitek-inner-title">세부사항</span>
              <i class="dicon dicon-chevron-up-sm accordion-digitek-chevron" aria-hidden="true"></i>
            </div>
            <div id="searchsplit-detail-contact" class="accordion-digitek-inner-content">
              <div class="searchsplit-digitek-info-grid">
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">의뢰자</span>
                  <span class="searchsplit-digitek-info-value d-flex align-items-center gap-digitek-8">
                    <img src="/images/icons/avatar.png" width="22" height="22" alt="" aria-hidden="true" style="border-radius: 50%;">
                    <!-- [커스텀] th:text="${selectedItem.requester.name}" 으로 의뢰자 이름 동적 바인딩 -->
                    이래근
                  </span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">품질경영 담당자</span>
                  <span class="searchsplit-digitek-info-value d-flex align-items-center gap-digitek-8">
                    <img src="/images/icons/avatar.png" width="22" height="22" alt="" aria-hidden="true" style="border-radius: 50%;">
                    <!-- [커스텀] th:text="${selectedItem.qualityManager.name}" 으로 동적 바인딩 -->
                    홍길동
                  </span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">책임자</span>
                  <span class="searchsplit-digitek-info-value d-flex align-items-center gap-digitek-8">
                    <img src="/images/icons/avatar.png" width="22" height="22" alt="" aria-hidden="true" style="border-radius: 50%;">
                    <!-- [커스텀] th:text="${selectedItem.manager.name}" 으로 동적 바인딩 -->
                    권경영
                  </span>
                </div>
                <div class="searchsplit-digitek-info-row">
                  <span class="searchsplit-digitek-info-label">사업부/법인</span>
                  <!-- [커스텀] th:text="${selectedItem.division}" 으로 동적 바인딩 -->
                  <span class="searchsplit-digitek-info-value">KLK</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 고객 일정 아코디언 (닫힘) -->
          <div class="accordion-digitek-inner">
            <div class="accordion-digitek-inner-header" role="button" tabindex="0"
                 aria-expanded="false" aria-controls="searchsplit-detail-customer-schedule">
              <span class="accordion-digitek-inner-title">고객 일정</span>
              <i class="dicon dicon-chevron-up-sm accordion-digitek-chevron accordion-digitek-chevron-closed" aria-hidden="true"></i>
            </div>
            <div id="searchsplit-detail-customer-schedule" class="accordion-digitek-inner-content" hidden></div>
          </div>
        </div>
      </div>
</div>
<script>
(function() {
  /* 필터 토글 */
  document.querySelectorAll('[data-toggle="searchsplit-filter"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var expanded = this.getAttribute('aria-expanded') === 'true';
      var nowExpanded = !expanded;
      this.setAttribute('aria-expanded', String(nowExpanded));
      var icon = this.querySelector('.dicon');
      if (icon) {
        icon.classList.toggle('dicon-chevron-down', !nowExpanded);
        icon.classList.toggle('dicon-chevron-up', nowExpanded);
      }
      var area = this.closest('.searchsplit-digitek-search-panel').querySelector('.searchsplit-digitek-filter-area');
      if (area) area.classList.toggle('show');
    });
  });

  /* 뷰 탭 토글 */
  document.querySelectorAll('.searchsplit-digitek-view-tab').forEach(function(tab) {
    tab.addEventListener('click', function() {
      this.closest('.searchsplit-digitek-view-tabs').querySelectorAll('.searchsplit-digitek-view-tab').forEach(function(t) {
        t.classList.remove('active');
        t.setAttribute('aria-pressed', 'false');
      });
      this.classList.add('active');
      this.setAttribute('aria-pressed', 'true');
      var container = this.closest('.searchsplit-digitek-body');
      if (!container) return;
      var isFullView = this.textContent.trim() === '펼쳐서 보기';
      container.classList.toggle('searchsplit-digitek-body-fullview', isFullView);
    });
  });

  /* 행 클릭 → 상세 패널 열기 */
  document.querySelectorAll('[data-detail-trigger]').forEach(function(row) {
    row.addEventListener('click', function() {
      var body = this.closest('.searchsplit-digitek-body');
      if (!body) return;
      body.classList.add('searchsplit-digitek-body-detail-open');
      document.querySelectorAll('.searchsplit-digitek-table-row').forEach(function(r) { r.classList.remove('active'); });
      this.classList.add('active');
    });
  });

  /* 상세 패널 닫기 */
  document.querySelectorAll('[data-action="close"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var body = this.closest('.searchsplit-digitek-body');
      if (body) {
        body.classList.remove('searchsplit-digitek-body-detail-open');
        body.classList.remove('searchsplit-digitek-body-fullview');
      }
    });
  });

  /* 확대 버튼 → 전체 보기 + 축소 버튼으로 교체 */
  document.querySelectorAll('[data-action="expand"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var panel = this.closest('.searchsplit-digitek-detail');
      var body = this.closest('.searchsplit-digitek-body');
      if (body) body.classList.add('searchsplit-digitek-body-fullview');
      if (panel) {
        var expandBtn = panel.querySelector('[data-action="expand"]');
        var shrinkBtn = panel.querySelector('[data-action="shrink"]');
        if (expandBtn) expandBtn.hidden = true;
        if (shrinkBtn) { shrinkBtn.hidden = false; shrinkBtn.focus(); }
      }
    });
  });

  /* 축소 버튼 → 전체 보기 해제 + 확대 버튼 복원 + 모달 열기 */
  document.querySelectorAll('[data-action="shrink"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var panel = this.closest('.searchsplit-digitek-detail');
      var body = this.closest('.searchsplit-digitek-body');
      if (body) body.classList.remove('searchsplit-digitek-body-fullview');
      if (panel) {
        var expandBtn = panel.querySelector('[data-action="expand"]');
        var shrinkBtn = panel.querySelector('[data-action="shrink"]');
        if (shrinkBtn) shrinkBtn.hidden = true;
        if (expandBtn) expandBtn.hidden = false;
      }
      var modal = document.getElementById('searchsplit-detail-modal');
      if (modal) {
        modal.hidden = false;
        modal.removeAttribute('aria-hidden');
        var firstBtn = modal.querySelector('button');
        if (firstBtn) firstBtn.focus();
      }
    });
  });

  /* 모달 닫기 (모달 내 버튼 / 오버레이 클릭 / Escape) */
  document.querySelectorAll('[data-action="modal-close"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var modal = document.getElementById('searchsplit-detail-modal');
      if (modal) {
        modal.hidden = true;
        modal.setAttribute('aria-hidden', 'true');
      }
    });
  });

  var modalOverlay = document.getElementById('searchsplit-detail-modal');
  if (modalOverlay) {
    modalOverlay.addEventListener('click', function(e) {
      if (e.target === this) {
        this.hidden = true;
        this.setAttribute('aria-hidden', 'true');
      }
    });
  }

  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      var openModal = document.getElementById('searchsplit-detail-modal');
      if (openModal && !openModal.hidden) {
        openModal.hidden = true;
        openModal.setAttribute('aria-hidden', 'true');
      }
    }
  });

  /* 결과 헤더 아코디언 토글 */
  document.querySelectorAll('[data-toggle="searchsplit-results"]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var expanded = this.getAttribute('aria-expanded') === 'true';
      var nowExpanded = !expanded;
      this.setAttribute('aria-expanded', String(nowExpanded));
      var icon = this.querySelector('.dicon');
      if (icon) {
        icon.classList.toggle('dicon-chevron-down', !nowExpanded);
        icon.classList.toggle('dicon-chevron-up', nowExpanded);
      }
      var card = this.closest('.searchsplit-digitek-results-card');
      if (card) {
        card.querySelectorAll('.searchsplit-digitek-table-wrap, .searchsplit-digitek-pagination').forEach(function(el) {
          el.style.display = nowExpanded ? '' : 'none';
        });
      }
    });
  });
})();
</script>